[![Build Status](https://travis-ci.org/CACrowd/casim.svg?branch=master)](https://travis-ci.org/CACrowd)

# casim
This project provides CA pedestrian simulation that is based on the article

Crociani, L. and LÃ¤mmel, G. (2016). Multidestination Pedestrian Flows in 
Equilibrium: A Cellular Automaton-Based Approach. Computer-Aided Civil 
and Infrastructure Engineering, doi: [10.1111/mice.12209](http://onlinelibrary.wiley.com/doi/10.1111/mice.12209/abstract)

# Getting started
## Build
The easiest way to build **casim** is using Maven in the commandline. A jar file with all dependencies can be generated by invoking:

    mvn test
    mvn assembly:single
    
This will generate a jar file with all dependencies, which will be located in the subdirectory *target* 

## Run as stand-alone application
Even though **casim** is designed to be coupled to other transport simulation frameworks such as [MATSim](http://matsim.org) 
or [SUMO](http://sumo.dlr.de) it can also be used as a stand-alone application. An entry point to setup your own stand-alone scenario
is the class:
    
    org.cacrowd.casim.run.MyDaganzoRunner
     
Some sample environment layouts can be found in the resources folder.

## Run as hybrid simulation
**casim** offers an interface to be coupled with other simulation frameworks using [protobuf](https://github.com/google/protobuf) 
over [GRPC](http://www.grpc.io). In this setup **casim** acts as a server where other client simulation frameworks can connect to.
A demo client-server setup is provided by the class:

    org.cacrowd.casim.hybridsim.run.MyHybridsimRunner
    
## Run hybrid simulation server in DIY docker container
**casim** server can also be run in a docker container. You can build and run the docker container by invoking

    docker build --rm -t casim .
    docker run -p 9000:9000 casim
   
## Run hybrid simulation server in provided docker container
Docker builds are available via [docker hub](https://hub.docker.com/r/grgrlmml/casim/). To run **casim** in a provided docker container enter

    docker pull grgrlmml/casim
    docker run -p 9000:9000 grgrlmml/casim
    


